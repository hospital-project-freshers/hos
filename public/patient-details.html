<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Patient Details - Book Appointment</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .form-section {
      padding: 2rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      margin: 1.5rem auto;
      max-width: 800px;
    }

    .form-section h2 {
      color: #4a6fa5;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #343a40;
    }

    .form-group input,
    .form-group select {
      padding: 0.75rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #66b3ff;
      box-shadow: 0 0 0 3px rgba(102, 179, 255, 0.2);
    }
  </style>
</head>
<body class="bg-gray-50 font-sans">
  <!-- Header -->
  <div class="p-4 flex justify-between items-center bg-white shadow">
    <h1 class="text-2xl font-bold text-blue-600">MediCare</h1>
  </div>

  <!-- Stepper -->
  <div class="max-w-4xl mx-auto mt-8">
    <div class="flex items-center justify-between relative">
      <div class="relative flex justify-between w-full items-center">
        <!-- Step 1 -->
        <div class="step-item text-center z-10">
          <div class="w-10 h-10 bg-blue-500 text-white rounded-full flex items-center justify-center mx-auto">1</div>
          <p class="mt-2 text-sm font-medium">Patient details</p>
        </div>

        <!-- Line 1-2 -->
        <div class="flex-1 h-1 bg-gray-300 mx-4"></div>

        <!-- Step 2 -->
        <div class="step-item text-center z-10">
          <div class="w-10 h-10 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center mx-auto">2</div>
          <p class="mt-2 text-sm">Select doctor</p>
        </div>

        <!-- Line 2-3 -->
        <div class="flex-1 h-1 bg-gray-300 mx-4"></div>

        <!-- Step 3 -->
        <div class="step-item text-center z-10">
          <div class="w-10 h-10 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center mx-auto">3</div>
          <p class="mt-2 text-sm">Choose Date & Time</p>
        </div>

        <!-- Line 3-4 -->
        <div class="flex-1 h-1 bg-gray-300 mx-4"></div>

        <!-- Step 4 -->
        <div class="step-item text-center z-10">
          <div class="w-10 h-10 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center mx-auto">4</div>
          <p class="mt-2 text-sm">Confirmation</p>
        </div>
      </div>
    </div>
  </div>
    <div class="step-item text-center z-10">
          <div class="w-10 h-10 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center mx-auto">4</div>
          <p class="mt-2 text-sm">Confirmation</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Patient Details Form -->
  <section class="form-section" id="patientSection">
    <h2>Patient Details</h2>
    <form id="patientForm">
      <div class="form-grid">
        <div class="form-group">
          <label for="patient-name">Patient Name<span class="text-red-500">*</span></label>
          <input type="text" id="patient-name" name="name" placeholder="Enter full name" required />
        </div>

        <div class="form-group">
          <label for="patient-age">Age<span class="text-red-500">*</span></label>
          <input type="number" id="patient-age" name="age" placeholder="Years" min="0" required />
        </div>

        <div class="form-group">
          <label for="patient-gender">Gender<span class="text-red-500">*</span></label>
          <select id="patient-gender" name="gender" required>
            <option value="">Select</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <div class="form-group">
          <label for="blood-group">Blood Group<span class="text-red-500">*</span></label>
          <select id="blood-group" name="blood" required>
            <option value="">Select</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
          </select>
        </div>

        <div class="form-group">
          <label for="contact-number">Contact Number<span class="text-red-500">*</span></label>
          <input 
            type="tel"
            id="contact-number"
            name="contact"
            placeholder="Enter 10-digit number"
            pattern="\d{10}"
            inputmode="numeric"
            maxlength="10"
            required
            title="Please enter a valid 10-digit phone number" />
        </div>
      </div>
      <div class="text-right mt-6">
        <button type="button" id="patientNextBtn" class="bg-gray-400 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed">
          Next
        </button>
      </div>
    </form>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const patientForm = document.getElementById('patientForm');
      const patientNextBtn = document.getElementById('patientNextBtn');
      const contactInput = document.getElementById('contact-number');

      // Validate and enable/disable next button
      function checkForm() {
        const name = document.getElementById('patient-name').value;
        const age = document.getElementById('patient-age').value;
        const gender = document.getElementById('patient-gender').value;
        const blood = document.getElementById('blood-group').value;
        const contact = document.getElementById('contact-number').value;

        if (name && age && gender && blood && contact.length === 10) {
          patientNextBtn.classList.remove('bg-gray-400');
          patientNextBtn.classList.add('bg-blue-600');
          return true;
        } else {
          patientNextBtn.classList.add('bg-gray-400');
          patientNextBtn.classList.remove('bg-blue-600');
          return false;
        }
      }

      // Add input listeners
      const inputs = document.querySelectorAll('input, select');
      inputs.forEach(input => {
        input.addEventListener('input', checkForm);
        input.addEventListener('change', checkForm);
      });

      // Only allow numbers in contact field
      contactInput.addEventListener('input', (e) => {
        e.target.value = e.target.value.replace(/[^0-9]/g, '');
        if (e.target.value.length > 10) {
          e.target.value = e.target.value.slice(0, 10);
        }
        checkForm();
      });

      // Handle next button click
      patientNextBtn.addEventListener('click', () => {
        if (checkForm()) {
          const patientData = {
            name: document.getElementById('patient-name').value.trim(),
            age: document.getElementById('patient-age').value.trim(),
            gender: document.getElementById('patient-gender').value.trim(),
            blood: document.getElementById('blood-group').value.trim(),
            contact: document.getElementById('contact-number').value.trim()
          };
          
          localStorage.setItem('patientData', JSON.stringify(patientData));
          // Try different path variations
          try {
            window.location.href = './select-doctor.html';
          } catch (e) {
            try {
              window.location.href = '/public/select-doctor.html';
            } catch (e2) {
              window.location.href = 'select-doctor.html';
            }
          }
        }
      });

      // Initial check
      checkForm();
    });
  </script>
</body>
</html>